---
import PostCard from "./post-card.astro";
import type { PostLayoutProps } from "../types";

const posts: PostLayoutProps[] =
  Astro.props.posts ??
  Object.values(import.meta.glob("../pages/posts/*.mdx", { eager: true }));
---

<ul>
  {
    posts
      .sort(
        (a, b) =>
          new Date(b.frontmatter.pubDate).getTime() -
          new Date(a.frontmatter.pubDate).getTime(),
      )
      .map((post) => (
        <PostCard
          title={post.frontmatter.title}
          url={post.frontmatter.affiliateLink ?? post.url}
          description={post.frontmatter.description}
          image={post.frontmatter.image}
        />
      ))
  }
</ul>
